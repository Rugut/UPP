Перем мСтруктураСтарыхЗначений;

Процедура ИмяФайлаПротоколаОбменаНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	ИмяФайлаПротокола = ПроцедурыОбменаДаннымиКлиент.ПолучитьИмяФайлаПротоколаОбмена();
	
	Если ПустаяСтрока(ИмяФайлаПротокола) Тогда
		Возврат;
	КонецЕсли;
	
	ИмяФайлаПротоколаОбменаOnLineОбмен = ИмяФайлаПротокола;
	
КонецПроцедуры

Процедура ИмяФайлаПротоколаОбменаОткрытие(Элемент, СтандартнаяОбработка)
	
	ОбработчикКаталогОткрытие(Элемент, СтандартнаяОбработка);
	
КонецПроцедуры

// при изменении флажка архивация при записи изменений
Процедура ВыполнятьАрхивациюФайловОбменаПриИзменении(Элемент)
	
	УстановитьДоступностьАрхивацииФайловПриОтправке();
	
КонецПроцедуры

// процедура устанавливает доступность пароля архивации файлов при отправке
Процедура УстановитьДоступностьАрхивацииФайловПриОтправке()
	
	ЭлементыФормы.НадписьПарольНаЗапись.Доступность = ВыполнятьАрхивациюФайловОбмена;
	ЭлементыФормы.ПарольНаОтправку.ТолькоПросмотр = НЕ ВыполнятьАрхивациюФайловОбмена;
	
КонецПроцедуры


Процедура ПриОткрытии()
	
	мСтруктураСтарыхЗначений = Новый Структура("ИмяФайлаПротоколаОбменаOnLineОбмен,КоличествоЭлементовВТранзакцииНаВыгрузкуДанных,ПарольНаПрием,КоличествоЭлементовВТранзакцииНаЗагрузкуДанных,ВыполнятьАрхивациюФайловОбмена,ПарольНаОтправку", 
		ИмяФайлаПротоколаОбменаOnLineОбмен,КоличествоЭлементовВТранзакцииНаВыгрузкуДанных,ПарольНаПрием,КоличествоЭлементовВТранзакцииНаЗагрузкуДанных,ВыполнятьАрхивациюФайловОбмена,ПарольНаОтправку);
		                                              		
	УстановитьДоступностьАрхивацииФайловПриОтправке();
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОсновныеДействияФормыВыполнить(Кнопка)
	
	ЭтаФорма.Закрыть(Истина);
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОтмена(Кнопка)
	
	ЗаполнитьЗначенияСвойств(ЭтотОбъект, мСтруктураСтарыхЗначений);
	
	ЭтаФорма.Закрыть(Ложь);
	
КонецПроцедуры