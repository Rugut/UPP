Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	УправлениеЭУ();
	
КонецПроцедуры

Процедура УправлениеЭУ()
	
	ЭлементыФормы.ПанельПараметры.Доступность = ПараметрыВручную;
	ЭлементыФормы.Организация.Доступность = НЕ ПараметрыВручную;
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОК(Кнопка)
	
	Если ПараметрыВручную Тогда
		СтрИНН = СокрЛП(ИНН);
		СтрКПП = СокрЛП(КПП);
		ДлинаИНН = СтрДлина(СтрИНН);
		ДлинаКПП = СтрДлина(СтрКПП);
		Если ДлинаИНН = 10 Тогда
			Если ДлинаКПП = 0 Тогда
				Предупреждение("Для продолжения задайте КПП.");
				Возврат;
			ИначеЕсли ДлинаКПП <> 9 Тогда
				Предупреждение("Укажите корректный КПП.");
				Возврат;
			КонецЕсли;
		ИначеЕсли ДлинаИНН = 0 Тогда
			Предупреждение("Для продолжения задайте ИНН" + ?(ДлинаКПП = 0, "\КПП", "") + ".");
			Возврат;
		ИначеЕсли ДлинаИНН <> 12
		ИЛИ НЕ РегламентированнаяОтчетность.ИННСоответствуетТребованиямБезТипа(СтрИНН) Тогда
			Предупреждение("Укажите корректный ИНН.");
			Возврат;
		КонецЕсли;
		Результат = Новый Структура("ИНН, КПП", СокрЛП(ИНН), СокрЛП(КПП));
	Иначе
		Если Организация.Пустая() Тогда
			Предупреждение("Для продолжения выберите организацию.");
			Возврат;
		КонецЕсли;
		Результат = Новый Структура("Организация", Организация);
	КонецЕсли;
	Закрыть(Результат);
	
КонецПроцедуры

Процедура ПереключательПараметрыВручнуюПриИзменении(Элемент)
	
	УправлениеЭУ();
	
КонецПроцедуры