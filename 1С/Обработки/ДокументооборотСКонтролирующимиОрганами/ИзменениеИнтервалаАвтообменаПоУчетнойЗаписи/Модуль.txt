Процедура УчетнаяЗаписьНажатие(Элемент)
	
	ОткрытьЗначение(УчетнаяЗапись);
	
КонецПроцедуры

Процедура УправлениеЭУ()
	
	ЭлементыФормы.ИнтервалАвтообмена.Доступность = ПереключательАвтообмен;
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	Если НЕ ЗначениеЗаполнено(Пользователь) Тогда
		Пользователь = глЗначениеПеременной("глТекущийПользователь");
	КонецЕсли;
	
	ИнтервалАвтообмена = КонтекстЭДО.ПолучитьИнтервалАвтообмена(УчетнаяЗапись, Пользователь);
	
	ПереключательАвтообмен = (ИнтервалАвтообмена <> 0);
	УправлениеЭУ();
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОК(Кнопка)
	
	Ответ = Вопрос("Изменение вступит в силу незамедлительно. Продолжить?", РежимДиалогаВопрос.ДаНет);
	Если Ответ <> КодВозвратаДиалога.Да Тогда
		Возврат;
	КонецЕсли;
	
	Если НЕ КонтекстЭДО.УстановитьИнтервалАвтообмена(УчетнаяЗапись, Пользователь, ?(ПереключательАвтообмен, ИнтервалАвтообмена, 0)) Тогда
		Предупреждение("Не удалось применить настройку!");
		Возврат;
	КонецЕсли;
	
	Закрыть(Истина);
	
КонецПроцедуры

Процедура ПользовательНажатие(Элемент)
	
	ОткрытьЗначение(Пользователь);
	
КонецПроцедуры

Процедура ПереключательАвтообменПриИзменении(Элемент)
	
	УправлениеЭУ();
	
	Если ПереключательАвтообмен И ИнтервалАвтообмена = 0 Тогда
		ИнтервалАвтообмена = 1;
		ТекущийЭлемент = ЭлементыФормы.ИнтервалАвтообмена;
	КонецЕсли;
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОтмена(Кнопка)
	
	Закрыть();
	
КонецПроцедуры