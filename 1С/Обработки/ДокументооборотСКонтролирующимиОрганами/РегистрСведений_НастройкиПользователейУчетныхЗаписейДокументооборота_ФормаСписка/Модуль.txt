Перем АдминистраторУчетнойЗаписи;

Процедура РегистрСведенийСписокПриПолученииДанных(Элемент, ОформленияСтрок)
	
	ТекПользователь = глЗначениеПеременной("глТекущийПользователь");
	Для Каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		ИнтервалАвтообмена = ОформлениеСтроки.ДанныеСтроки.ИнтервалАвтообмена;
		Если ИнтервалАвтообмена = 0 Тогда
			ОформлениеСтроки.Ячейки.ИнтервалАвтообмена.УстановитьТекст("Отключен");
		Иначе
			ОформлениеСтроки.Ячейки.ИнтервалАвтообмена.УстановитьТекст("Каждые " + Формат(ИнтервалАвтообмена, "ЧГ=") + " мин.");
		КонецЕсли;
		ЭтоТекущийПользователь = (ОформлениеСтроки.ДанныеСтроки.Пользователь = ТекПользователь);
		Если ЭтоТекущийПользователь Тогда
			ОформлениеСтроки.Шрифт = Новый Шрифт(ОформлениеСтроки.Шрифт, , , Истина);
		КонецЕсли;
		ОформлениеСтроки.Ячейки.ИнтервалАвтообмена.ТолькоПросмотр = НЕ (ЭтоТекущийПользователь ИЛИ АдминистраторУчетнойЗаписи);
	КонецЦикла;
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	АдминистраторУчетнойЗаписи = КонтекстЭДО.ТекущийПользовательЯвляетсяАдминистраторомУчетныхЗаписейДокументооборота();
	
КонецПроцедуры
 
Процедура РегистрСведенийСписокПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	
	Если НоваяСтрока И Не Копирование Тогда
		Элемент.ТекущиеДанные.Пользователь = глЗначениеПеременной("глТекущийПользователь");
	КонецЕсли;
	
КонецПроцедуры

Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "Опрос форм" И Параметр.Ключ = "РегистрСведений_НастройкиПользователейУчетныхЗаписейДокументооборота_ФормаСписка" Тогда
		Параметр.Форма = ЭтаФорма;
	КонецЕсли;
	
КонецПроцедуры