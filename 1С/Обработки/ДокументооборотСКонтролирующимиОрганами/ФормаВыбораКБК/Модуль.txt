Перем мКБК Экспорт;

Процедура КнопкаВыполнитьНажатие(Кнопка)
	
	Если ЭлементыФормы.КБК.ТекущиеДанные <> Неопределено Тогда
		Закрыть(ЭлементыФормы.КБК.ТекущиеДанные.КБК);
	Иначе
		Предупреждение("Укажите КБК!");
	КонецЕсли;
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОсновныеДействияФормыЗакрыть(Кнопка)
	
	Закрыть();
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	МакетКБК = КонтекстЭДО.ПолучитьМакет("КБК");
	Для Инд = 1 По МакетКБК.ВысотаТаблицы Цикл
		НовСтр = КБК.Добавить();
		НовСтр.КБК = СокрЛП(МакетКБК.Область(Инд, 1, Инд, 1).Текст);
		НовСтр.НаименованиеДохода = СокрЛП(МакетКБК.Область(Инд, 2, Инд, 2).Текст);
	КонецЦикла;
	
	Если ЗначениеЗаполнено(мКБК) Тогда
		РезультатПоиска = КБК.Найти(мКБК, "КБК");
		Если РезультатПоиска <> Неопределено Тогда
			ЭлементыФормы.КБК.ТекущаяСтрока = РезультатПоиска;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Процедура КБКВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	
	Закрыть(ЭлементыФормы.КБК.ТекущиеДанные.КБК);
	
КонецПроцедуры