Процедура ДействияФормыРедактироватьКод(Кнопка)
	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(Метаданные.Справочники.КатегорииОбъектов, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры
// Обработчик события ПередНачаломДобавления элемента СправочникСписок.
Процедура СправочникСписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, ЭтоГруппа)
	НазначениеКатегории = СправочникСписок.Отбор.НазначениеКатегории.Значение;

	Если НЕ ЗначениеЗаполнено(НазначениеКатегории) ИЛИ НазначениеКатегории.ЭтоГруппа Тогда
		Предупреждение("Не выбрано назначение категории!");

		Отказ = Истина;

	ИначеЕсли Элемент.СпособРедактирования = СпособРедактированияСписка.ВДиалоге Тогда
		Форма = Справочники.КатегорииОбъектов.ПолучитьФормуНовогоЭлемента(, ЭтаФорма, "Справочники.КатегорииОбъектов.ФормаНовогоЭлемента");
		Форма.НазначениеКатегории = НазначениеКатегории;
		Форма.Открыть();

		Отказ = Истина;
	КонецЕсли;

КонецПроцедуры

// Обработчик события ПриНачалеРедактирования элемента СправочникСписок.
Процедура СправочникСписокПриНачалеРедактирования(Элемент, НоваяСтрока)
	
	Если НоваяСтрока Тогда
		Элемент.ТекущиеДанные.НазначениеКатегории = СправочникСписок.Отбор.НазначениеКатегории.Значение;
	КонецЕсли;

КонецПроцедуры

Процедура ПриОткрытии()
	
	МеханизмНумерацииОбъектов.ДобавитьВМенюДействияКнопкуРедактированияКода(ЭлементыФормы.ДействияФормы.Кнопки.Подменю);
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные.Справочники.КатегорииОбъектов, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры