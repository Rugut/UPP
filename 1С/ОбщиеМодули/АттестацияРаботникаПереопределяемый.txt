////////////////////////////////////////////////////////////////////////////////
// Вспомогательные процедуры, функции

////////////////////////////////////////////////////////////////////////////////
// Процедуры, функции объекта

////////////////////////////////////////////////////////////////////////////////
// Процедуры, функции для работы формы 

Функция СформироватьЗапросПоКомпетенциям(ЭтотОбъект) Экспорт
	
	// Получить список компетенций
	Запрос = Новый Запрос;
	
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ДолжностныеКомпетенцииРаботников.Компетенция
	|ИЗ
	|	РегистрСведений.ДолжностныеКомпетенцииРаботников КАК ДолжностныеКомпетенцииРаботников
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	|			РаботникиСрезПоследних.ФизЛицо КАК ФизЛицо,
	|			РаботникиСрезПоследних.Должность.Должность КАК Должность
	|		ИЗ
	|			РегистрСведений.Работники.СрезПоследних(, ФизЛицо = &ФизЛицо) КАК РаботникиСрезПоследних) КАК ВложенныйЗапрос
	|		ПО ДолжностныеКомпетенцииРаботников.Должность = ВложенныйЗапрос.Должность";
	
	Запрос.УстановитьПараметр("ФизЛицо", ЭтотОбъект.Физлицо);
	
	Возврат Запрос.Выполнить();
	
КонецФункции

#Если ТолстыйКлиентОбычноеПриложение Тогда

Процедура ФормаДокументаПередОткрытиемДополнительно(Форма) Экспорт
	
	// В этой конфигурации дополнительных действий не предусмотрено
	
КонецПроцедуры

Процедура ФормаДокументаДополнительныеДействия(ИмяКоманды, Форма) Экспорт
	
	Если ИмяКоманды = "ОткрытьАнкету" Тогда
		
		ЭлементыФормы = Форма.ЭлементыФормы;
		Если ЭлементыФормы.СписокКомпетенций.ТекущаяСтрока = неопределено тогда
			Возврат
		КонецЕсли;
		
		ТиповаяАнкета = ЭлементыФормы.СписокКомпетенций.ТекущаяСтрока.Компетенция.ТиповаяАнкета;
		
		Если НЕ ЗначениеЗаполнено(ТиповаяАнкета) тогда
			Ответ = Вопрос ("Типовая анкета не выбрана в справочнике компетенций. Открыть компетенцию?", РежимДиалогаВопрос.ДаНет);	
			
			Если Ответ = КодВозвратаДиалога.Да Тогда
				ЭлементыФормы.СписокКомпетенций.ТекущаяСтрока.Компетенция.ПолучитьФорму().Открыть();
			КонецЕсли;
			
			Возврат
		КонецЕсли;
		
		ТиповаяАнкета.ПолучитьФорму().Открыть();
		
	КонецЕсли;
	
КонецПроцедуры

#КонецЕсли